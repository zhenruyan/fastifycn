<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Decorators</title>
  <meta name="description" content="Fast and low overhead web framework, for Node.js">

  <link rel="apple-touch-icon" sizes="57x57" href="/images/apple-icon-57x57.png">
  <link rel="apple-touch-icon" sizes="60x60" href="/images/apple-icon-60x60.png">
  <link rel="apple-touch-icon" sizes="72x72" href="/images/apple-icon-72x72.png">
  <link rel="apple-touch-icon" sizes="76x76" href="/images/apple-icon-76x76.png">
  <link rel="apple-touch-icon" sizes="114x114" href="/images/apple-icon-114x114.png">
  <link rel="apple-touch-icon" sizes="120x120" href="/images/apple-icon-120x120.png">
  <link rel="apple-touch-icon" sizes="144x144" href="/images/apple-icon-144x144.png">
  <link rel="apple-touch-icon" sizes="152x152" href="/images/apple-icon-152x152.png">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-icon-180x180.png">
  <link rel="icon" type="image/png" sizes="192x192"  href="/images/android-icon-192x192.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
  <link rel="manifest" href="/manifest.json">
  <meta name="msapplication-TileColor" content="#ffffff">
  <meta name="msapplication-TileImage" content="/images/ms-icon-144x144.png">
  <meta name="theme-color" content="#ffffff">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.5.1/css/bulma.min.css" integrity="sha256-CDVQJfU+jJGU/oyDzvnzuGXbv0rz+SyBsPQwyn7x/jQ=" crossorigin="anonymous" />
  <link rel="stylesheet" href="/css/style.css"/>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" integrity="sha256-Zd1icfZ72UBmsId/mUcagrmN7IN5Qkrvh75ICHIQVTk=" crossorigin="anonymous" />

  

  
</head>


  <body>
    <nav id="main-navbar" class="navbar">
  <div class="navbar-brand">
    <a class="navbar-item" href="/">
      <img src="/images/fastify-logo-menu.png" alt="Fastify: Fast and low overhead web framework, for Node.js" height="28">
    </a>

    <a class="navbar-item is-hidden-desktop" href="https://github.com/fastify/fastify" target="_blank">
      <span class="icon" style="color: #333;">
        <i class="fa fa-github"></i>
      </span>
    </a>

    <div class="navbar-burger burger" data-target="mobileMenu">
      <span></span>
      <span></span>
      <span></span>
    </div>
  </div>

  <div class="navbar-menu" id="mobileMenu">
    <div class="navbar-start">
      <a class="navbar-item " href="/">Home</a>
      <a class="navbar-item " href="/docs/latest">Docs</a>
      <a class="navbar-item " href="/ecosystem">Ecosystem</a>
      <a class="navbar-item " href="/benchmarks">Benchmarks</a>
    </div>

    <div class="navbar-end">
      <a class="navbar-item" href="https://github.com/fastify/fastify" target="_blank">
        <span class="fa fa-github"> </span>&nbsp;Github
      </a>
    </div>
  </div>
</nav>


    <main class="page-content" aria-label="Content">
      
<section class="hero is-primary" style="background-image: url('/images/bg-pattern-bright.png')">
  <div class="hero-body">
      <div class="container">
        <h1 class="title">
          Documentation
        </h1>
      </div>
  </div>
</section>

<div class="container">
  <section class="section">
    <div class="columns">

      <div class="column is-3 is-hidden-mobile" data-sticky-container>
        <aside class="menu sticky">
          <p class="menu-label">
            Table of contents
          </p>
          <ul class="menu-list">
            
              <li >
                <a  href="/docs/v0.22.x/Getting-Started">Getting Started</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Server-Methods">Server Methods</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Routes">Routes</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Logging">Logging</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Middlewares">Middlewares</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Hooks">Hooks</a>
              </li>
            
              <li id="doc-menu-section">
                <a class="is-active" href="/docs/v0.22.x/Decorators">Decorators</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Validation-And-Serialize">Validation and Serialize</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Lifecycle">Lifecycle</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Reply">Reply</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Request">Request</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/ContentTypeParser">Content Type Parser</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Plugins">Plugins</a>
              </li>
            
              <li >
                <a  href="/docs/v0.22.x/Testing">Testing</a>
              </li>
            
          </ul>
          <div class="content" style="margin: .8em; border-top: 1px solid #ccc; padding: .8em 0 0 0">
            Docs version
            <div class="field">
              <div class="control">
                <div class="select">
                  <select onchange="if (this.value) window.location.href=this.value">
                    
                      
                        
                        
                          <option  value="/docs/master">master</option>
                      
                    
                      
                        
                        
                          
                        
                          <option  value="/docs/v0.33.x">v0.33.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.32.x">v0.32.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.31.x">v0.31.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.30.x">v0.30.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.29.x">v0.29.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.28.x">v0.28.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.27.x">v0.27.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.26.x">v0.26.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.25.x">v0.25.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.24.x">v0.24.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.23.x">v0.23.x</option>
                      
                    
                      
                        
                        
                          <option selected="selected" value="/docs/v0.22.x">v0.22.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.21.x">v0.21.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.20.x">v0.20.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.19.x">v0.19.x</option>
                      
                    
                      
                        
                        
                          <option  value="/docs/v0.18.x">v0.18.x</option>
                      
                    
                      
                    
                  </select>
                </div>
              </div>
            </div>
          </div>
        </aside>
      </div>

      <div class="column">
        <nav class="breadcrumb">
          <ul>
            <li><a href="/" style="padding-left: 0">Fastify</a></li>
            <li><a href="/docs/">Documentation</a></li>
            <li>
              <div class="field">
                <div class="control">
                  <div class="select">
                    <select onchange="if (this.value) window.location.href=this.value" style="border: none;">
                      
                        
                          
                          <option  value="/docs/master">master</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.33.x">v0.33.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.32.x">v0.32.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.31.x">v0.31.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.30.x">v0.30.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.29.x">v0.29.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.28.x">v0.28.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.27.x">v0.27.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.26.x">v0.26.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.25.x">v0.25.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.24.x">v0.24.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.23.x">v0.23.x</option>
                        
                      
                        
                          
                          <option selected="selected" value="/docs/v0.22.x">v0.22.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.21.x">v0.21.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.20.x">v0.20.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.19.x">v0.19.x</option>
                        
                      
                        
                          
                          <option  value="/docs/v0.18.x">v0.18.x</option>
                        
                      
                        
                      
                    </select>
                  </div>
                </div>
              </div>
            </li>
            <li class="is-active"><a>Decorators</a></li>
          </ul>
        </nav>

        <div id="doc-content" class="content">
          <h2 id="decorators">Decorators</h2>
<p>If you need to add functionalities to the Fastify instance, the <code>decorate</code> api is what you need.</p>
<p>This api allows you to add new properties to the Fastify instance, a property value is not restricted to be a function, could also be an object or a string for example.</p>
<p><a name="usage"></a></p>
<h3 id="usage">Usage</h3>
<p><a name="decorate"></a>
<strong>decorate</strong><br>Just call the <code>decorate</code> api and pass the name of the new property and its value.</p>
<pre><code class="lang-js">fastify.decorate(&#39;utility&#39;, () =&gt; {
  // something very useful
})
</code></pre>
<p>As said above, you can decorate the instance with other values and not only functions:</p>
<pre><code class="lang-js">fastify.decorate(&#39;conf&#39;, {
  db: &#39;some.db&#39;,
  port: 3000
})
</code></pre>
<p>Once you decorate the instance you can access the value every time you need by using the name you passed as parameter:</p>
<pre><code class="lang-js">fastify.utility()

console.log(fastify.conf.db)
</code></pre>
<p>Decorators are not <em>overwritable</em>, if you try to declare a decorator already declared <em>(in other words, use the same name)</em>, <code>decorate</code> will throw an exception.</p>
<p><a name="decorate-reply"></a>
<strong>decorateReply</strong><br>As the name suggest, this api is needed if you want to add new methods to the <code>Reply</code> core object.<br>Just call the <code>decorateReply</code> api and pass the name of the new property and its value.</p>
<pre><code class="lang-js">fastify.decorateReply(&#39;utility&#39;, () =&gt; {
  // something very useful
})
</code></pre>
<p><a name="decorate-request"></a>
<strong>decorateRequest</strong><br>As above, this api is needed if you want to add new methods to the <code>Request</code> core object.<br>Just call the <code>decorateRequest</code> api and pass the name of the new property and its value.</p>
<pre><code class="lang-js">fastify.decorateRequest(&#39;utility&#39;, () =&gt; {
  // something very useful
})
</code></pre>
<p><a name="extend-server-error"></a>
<strong>extendServerError</strong><br>If you need to extend the standard <a href="/docs/v0.22.x/Reply#errors">server error</a>, this api is what you need.<br>You <em>must</em> pass a function that returns an object, Fastify will extend the server error with the returned object of your function.</p>
<pre><code class="lang-js">fastify.extendServerError(() =&gt; {
  return {
    timestamp: new Date()
  }
})

/*
  The resulting object will be:
  {
    error: String
    message: String
    statusCode: Number
    timestamp: Date
  }
*/
</code></pre>
<p><a name="sync-async"></a></p>
<h4 id="sync-and-async">Sync and Async</h4>
<p><code>decorate</code> is a <em>synchronous</em> API, if you need to add a decorator that has an <em>asynchronous</em> bootstrap, could happen that Fastify boots up before that your decorator is ready. To avoid this issue you must use <code>register</code> api in combination with <code>fastify-plugin</code>, to know more check out the <a href="/docs/v0.22.x/Plugins">Plugins</a> documentation as well.</p>
<p><a name="dependencies"></a></p>
<h4 id="dependencies">Dependencies</h4>
<p>If your decorator depends on another decorator, you can also declare the dependencies of your function, it pretty easy. You just need to add an array of strings (representing the names of the decorators you are depending on) as third parameter.</p>
<pre><code class="lang-js">fastify.decorate(&#39;utility&#39;, fn, [&#39;greet&#39;, &#39;log&#39;])
</code></pre>
<p>If a dependency is not satisfied, <code>decorate</code> will throw an exception, but don&#39;t worry, the dependency check is done before the server boot up, so it will never happen at runtime.</p>
<p><a name="has-decorator"></a></p>
<h4 id="hasdecorator">hasDecorator</h4>
<p>You can check the presence of a decorator by using the <code>hasDecorator</code> api:</p>
<pre><code class="lang-js">fastify.hasDecorator(&#39;utility&#39;)
</code></pre>

        </div>

        <hr/>
        <nav class="level">
        
          
        
          
        
          
        
          
        
          
        
          
        
          
            <div class="level-left">
              <div class="level-item">
                
                  
                  
                  <a href="/docs/v0.22.x/Hooks" class="button prev">≪ Hooks</a>
                
              </div>
            </div>
            <div class="level-right">
              <div class="level-item">
                
                  
                  
                  <a href="/docs/v0.22.x/Validation-And-Serialize" class="button next">Validation and Serialize ≫</a>
                
              </div>
            </div>
          
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
        </nav>
      </div>
    </div>
  </section>

  <script>
    // dynamically creates a submenu for the current section based on the content headers
    var titles = document.querySelectorAll('#doc-content h3')
    var currentMenu = document.getElementById('doc-menu-section')
    if (titles.length && currentMenu) {
      var submenu = document.createElement('ul')
      titles.forEach(el => {
        var currentSubmenuItem = document.createElement('li')
        var currentSubmenuLink = document.createElement('a')
        currentSubmenuLink.href = '#' + el.id
        currentSubmenuLink.append(document.createTextNode(el.textContent))
        currentSubmenuItem.append(currentSubmenuLink)
        submenu.append(currentSubmenuItem)
      })
      currentMenu.append(submenu)
    }
  </script>
</div>

    </main>

    <footer class="grey is-primary footer">
  <div class="container">
    <div class="content has-text-centered">
    
      <p>Fastify, Copyright &copy; 2016-2017 Matteo Collina and the <a href="https://github.com/fastify/fastify#team" target="_blank">Fastify team</a>, Licensed under <a href="https://github.com/fastify/fastify/blob/master/LICENSE" target="_blank">MIT</a></p>
    </div>
  </div>
</footer>


    <script src="/js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>

</html>
